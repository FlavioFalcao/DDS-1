$Id$

** sub_init_crash test case

The new test script option 'sub_init_crash' tests the scenario in rt 9123

The Subscriber is killed (simulating a crash) after initialization.
The Publisher then crashes during its initialization.


** dl_clean test case

The new test script option 'dl_clean' tests a bug(RT11348) in DDS transport that the
DataLinkCleanupTask removes the new associations. This happens when new association
is added to a datalink that was declared to release resource due to disconnect. 

To reproduce the problem before the bug fix, follow steps:

1) Apply following patch to add a delay between reconnect failure and tear down link.

svn diff dds/DCPS/transport/simpleTCP/SimpleTcpReconnectTask.cpp
Index: dds/DCPS/transport/simpleTCP/SimpleTcpReconnectTask.cpp
===================================================================
--- dds/DCPS/transport/simpleTCP/SimpleTcpReconnectTask.cpp     (revision 1259)
+++ dds/DCPS/transport/simpleTCP/SimpleTcpReconnectTask.cpp     (working copy)
@@ -31,6 +31,9 @@
   if (op == DO_RECONNECT)
     {
       if (this->connection_->reconnect () == -1) {
+#if 1
+        ACE_OS::sleep (10);
+#endif
   this->connection_->tear_link ();
       }
     }
     
2) Run reconnect dl_clean test.

cd $DDS_ROOT/tests/DCPS/Reconnect
./run_test.pl dl_clean

3) Symptom:  The test will stop receiving any messages after second subscriber 
start about 10 seconds.     


To verify the bug was fixed, the patch above needs be applied. 
Run $DDS_ROOT/tests/DCPS/Reconnect/run_test.pl dl_clean
will continue receiving messages until test finish. 
Since it needs special patch for this bug fix, this test case
can not be added to automated nightly builds.




