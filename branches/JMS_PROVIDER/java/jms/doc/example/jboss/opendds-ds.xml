<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Id$

    Author:  Steven Stallion
    Version: $Revision$
-->
<!DOCTYPE connection-factories PUBLIC "-//JBoss//DTD JBOSS JCA Config 1.5//EN"
    "http://www.jboss.org/j2ee/dtd/jboss-ds_1_5.dtd">

<connection-factories>
    <mbean code="org.opendds.jms.management.ParticipantFactoryService"
           name="OpenDDS:service=DomainParticipantFactory">
        <attribute name="DCPSDebugLevel">10</attribute>
        <attribute name="DCPSInfoRepo">iiop://${jboss.bind.address}:6666/DCPSInfoRepo</attribute>
        <attribute name="ORBDebugLevel">10</attribute>
        <attribute name="ORBListenEndpoints">iiop://${jboss.bind.address}:6667</attribute>
        <attribute name="ORBLogFile">${jboss.server.log.dir}/DDS.log</attribute>
        <depends>jboss.jca:service=RARDeployment,name='opendds-jms-@VERSION@.rar'</depends>
    </mbean>

    <!--
        Destination configuration
    -->
    <mbean code="org.opendds.jms.management.Destination"
           name="OpenDDS:destination=DefaultTopic,type=Topic">
        <attribute name="JndiName">DDS/DefaultTopic</attribute>
        <depends>OpenDDS:service=DomainParticipantFactory</depends>
    </mbean>

    <mbean code="org.opendds.jms.management.Destination"
           name="OpenDDS:destination=CustomTopic,type=Topic">
        <attribute name="JndiName">DDS/CustomTopic</attribute>
        <attribute name="DataReaderQosPolicy">
            HISTORY.kind=KEEP_LAST
            HISTORY.depth=1
        </attribute>
        <attribute name="DataWriterQosPolicy">
            LATENCY_BUDGET.duration.sec=2
            TRANSPORT_PRIORITY.value=4096
        </attribute>
        <attribute name="TopicQosPolicy">
            TOPIC_DATA.value=CustomTopicData
        </attribute>
        <depends>OpenDDS:service=DomainParticipantFactory</depends>
    </mbean>

    <!--
        ConnectionFactory configuration
    -->
    <no-tx-connection-factory>
        <jndi-name>DDS/DefaultConnectionFactory</jndi-name>
        <rar-name>opendds-jms-@VERSION@.rar</rar-name>
        <connection-definition>org.opendds.jms.resource.ConnectionFactoryImpl</connection-definition>
        <config-property name="DomainId" type="java.lang.Integer">1</config-property>
        <config-property name="TransportType" type="java.lang.String">SimpleTcp</config-property>
        <max-pool-size>20</max-pool-size>
        <depends>OpenDDS:service=DomainParticipantFactory</depends>
    </no-tx-connection-factory>

    <no-tx-connection-factory>
        <jndi-name>DDS/CustomConnectionFactory</jndi-name>
        <rar-name>opendds-jms-@VERSION@.rar</rar-name>
        <connection-definition>org.opendds.jms.resource.ConnectionFactoryImpl</connection-definition>
        <config-property name="DomainId" type="java.lang.Integer">2</config-property>
        <config-property name="ParticipantQosPolicy" type="java.lang.String">
            <!-- TODO -->
        </config-property>
        <config-property name="PublisherQosPolicy" type="java.lang.String">
            <!-- TODO -->
        </config-property>
        <config-property name="PublisherTransport" type="java.lang.String">
            <!-- TODO -->
        </config-property>
        <config-property name="SubscriberQosPolicy" type="java.lang.String">
            <!-- TODO -->
        </config-property>
        <config-property name="SubscriberTransport" type="java.lang.String">
            <!-- TODO -->
        </config-property>
        <config-property name="TransportType" type="java.lang.String">SimpleTcp</config-property>
        <max-pool-size>20</max-pool-size>
        <depends>OpenDDS:service=DomainParticipantFactory</depends>
    </no-tx-connection-factory>
</connection-factories>
